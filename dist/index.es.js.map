{"version":3,"file":"index.es.js","sources":["../src/index.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\n\nexport const useChange = (callback, deps=[]) => {\n    const initialLoad = useRef(true);\n\n    useEffect(() => {\n        if (!initialLoad.current) {\n            callback();\n        }\n\n        initialLoad.current = false;\n    }, deps)\n}\n\nexport function useMousePosition() {\n    const [ mousePosition, setMousePosition ] = useState({ x:0, y: 0 });\n\n    function handleMouseMove(e) {\n        setMousePosition({ x: e.clientX, y: e.clientY });\n    }\n\n    useEffect(() => {\n        window.addEventListener(\"mousemove\", handleMouseMove);\n        return () => window.removeEventListener(\"mousemove\", handleMouseMove)\n    });\n\n    return mousePosition;\n}\n\nexport function useMousePositionRelative(element=null, scale=1) {\n\n    const mousePosition = useMousePosition();\n    let offset = { x: 0, y: 0 }\n\n    if (element) {\n        const rect = element.getBoundingClientRect();\n        offset = { x: rect.left, y: rect.top };\n    } else {\n        element = window.document.documentElement;\n    }\n\n    return {\n        x: (mousePosition.x - offset.x) / scale,\n        y: (mousePosition.y - offset.y) / scale\n    };\n}\n\nexport function useMouseDrag(element, contraints=[]) {\n\n    if (!element) {\n        element = window.document.documentElement;\n    }\n\n    const mousePosition = useMousePositionRelative(element);\n    const ref = useRef(mousePosition)\n\n    let [ startPosition, setStartPosition] = useState(null);\n    const [ dragging, setDragging ] = useState(false);\n\n    const handleMouseDown = (e) => {\n        const valid = contraints.every(fn => fn(mousePosition));\n        if (valid) {\n            setStartPosition(ref.current);\n        }\n    }\n\n    function handleMouseUp(e) {\n        setDragging(false);\n    }\n\n    useEffect(() => {\n        ref.current = mousePosition\n    }, [ mousePosition ]);\n\n    useChange(() => {\n        setDragging(true);\n    }, [ startPosition ]);\n\n    useEffect(() => {\n        if (element) {\n            element.addEventListener('mousedown', handleMouseDown);\n            window.addEventListener('mouseup', handleMouseUp);\n            return () => {\n                element.removeEventListener('mousedown', handleMouseDown);\n                window.removeEventListener('mouseup', handleMouseUp);\n            };\n        }\n        \n    }, [ element ]);\n\n    return {\n        mousePosition: {\n            start: { ...startPosition },\n            end: { ...mousePosition }\n        },\n        dragging\n    }\n}"],"names":["useChange","callback","deps","initialLoad","useRef","useEffect","current","useMousePosition","useState","x","y","mousePosition","setMousePosition","handleMouseMove","e","clientX","clientY","window","addEventListener","removeEventListener","useMousePositionRelative","element","scale","offset","rect","getBoundingClientRect","left","top","document","documentElement","useMouseDrag","contraints","ref","startPosition","setStartPosition","dragging","setDragging","handleMouseDown","valid","every","fn","handleMouseUp","start","end"],"mappings":"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"}
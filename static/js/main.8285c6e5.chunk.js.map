{"version":3,"sources":["../../dist/index.es.js","App.js","index.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","_slicedToArray","arr","Array","isArray","_arrayWithHoles","Symbol","iterator","prototype","toString","call","_arr","_n","_d","_e","undefined","_s","_i","next","done","err","_iterableToArrayLimit","TypeError","_nonIterableRest","callback","deps","initialLoad","current","useMousePositionRelative","element","scale","mousePosition","_useState2","x","y","setMousePosition","handleMouseMove","e","clientX","clientY","window","addEventListener","removeEventListener","useMousePosition","offset","rect","getBoundingClientRect","left","top","document","documentElement","App","useState","allowDragging","setAllowDragging","canvasRef","useRef","allowDraggingRef","contraints","ref","_useState4","startPosition","setStartPosition","_useState6","dragging","setDragging","handleMouseDown","every","fn","handleMouseUp","start","end","useMouseDrag","useEffect","useChange","alert","JSON","stringify","Fragment","className","style","opacity","onClick","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.8285c6e5.chunk.js","sourcesContent":["import { useRef, useEffect, useState } from 'react';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nvar useChange = function useChange(callback) {\n  var deps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var initialLoad = useRef(true);\n  useEffect(function () {\n    if (!initialLoad.current) {\n      callback();\n    }\n\n    initialLoad.current = false;\n  }, deps);\n};\n\nfunction useMousePosition() {\n  var _useState = useState({\n    x: 0,\n    y: 0\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      mousePosition = _useState2[0],\n      setMousePosition = _useState2[1];\n\n  function handleMouseMove(e) {\n    setMousePosition({\n      x: e.clientX,\n      y: e.clientY\n    });\n  }\n\n  useEffect(function () {\n    window.addEventListener(\"mousemove\", handleMouseMove);\n    return function () {\n      return window.removeEventListener(\"mousemove\", handleMouseMove);\n    };\n  });\n  return mousePosition;\n}\n\nfunction useMousePositionRelative() {\n  var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  var scale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var mousePosition = useMousePosition();\n  var offset = {\n    x: 0,\n    y: 0\n  };\n\n  if (element) {\n    var rect = element.getBoundingClientRect();\n    offset = {\n      x: rect.left,\n      y: rect.top\n    };\n  } else {\n    element = window.document.documentElement;\n  }\n\n  return {\n    x: (mousePosition.x - offset.x) / scale,\n    y: (mousePosition.y - offset.y) / scale\n  };\n}\n\nfunction useMouseDrag(element) {\n  var contraints = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  if (!element) {\n    element = window.document.documentElement;\n  }\n\n  var mousePosition = useMousePositionRelative(element);\n  var ref = useRef(mousePosition);\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      startPosition = _useState4[0],\n      setStartPosition = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      dragging = _useState6[0],\n      setDragging = _useState6[1];\n\n  var handleMouseDown = function handleMouseDown(e) {\n    var valid = contraints.every(function (fn) {\n      return fn(mousePosition);\n    });\n\n    if (valid) {\n      setStartPosition(ref.current);\n    }\n  };\n\n  function handleMouseUp(e) {\n    setDragging(false);\n  }\n\n  useEffect(function () {\n    ref.current = mousePosition;\n  }, [mousePosition]);\n  useChange(function () {\n    setDragging(true);\n  }, [startPosition]);\n  useEffect(function () {\n    if (element) {\n      element.addEventListener('mousedown', handleMouseDown);\n      window.addEventListener('mouseup', handleMouseUp);\n      return function () {\n        element.removeEventListener('mousedown', handleMouseDown);\n        window.removeEventListener('mouseup', handleMouseUp);\n      };\n    }\n  }, [element]);\n  return {\n    mousePosition: {\n      start: _objectSpread2({}, startPosition),\n      end: _objectSpread2({}, mousePosition)\n    },\n    dragging: dragging\n  };\n}\n\nexport { useChange, useMouseDrag, useMousePosition, useMousePositionRelative };","import React, { useRef, useCallback, useState, useEffect } from 'react'\nimport { useMouseDrag, useChange } from 'use-mouse-drag'\n\nconst App = () => {\n  const [ allowDragging, setAllowDragging ] = useState(true);\n  const canvasRef = useRef();\n  const allowDraggingRef = useRef(allowDragging);\n\n  const { mousePosition, dragging } = useMouseDrag(canvasRef.current, [\n    mousePosition => allowDraggingRef.current\n  ]);\n\n  useEffect(() => {\n    allowDraggingRef.current = allowDragging;\n  }, [ allowDragging ]);\n\n  useChange(() => {\n    // Drag ended\n    if (!dragging) {\n      alert('Dragged: ' + JSON.stringify(mousePosition))\n    }\n  }, [ dragging ]);\n\n  return (\n    <React.Fragment>\n      <div ref={canvasRef} className=\"canvas\"\n      style={\n        { opacity: allowDragging ? 1: 0.4 }\n      }>\n      </div>\n\n\n      <div>Dragging: { dragging.toString() }</div>\n      <div>Position: { JSON.stringify(mousePosition) }</div>\n      <button onClick={() => setAllowDragging(!allowDragging)}>\n        Turn dragging { allowDragging ? 'Off' : 'On' }\n      </button>\n    </React.Fragment>\n  )\n}\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}